<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Responsive Image Gallery • Lightbox + Filters</title>
  <style>
    :root{
      --bg:#0f1115;      /* page background */
      --card:#151924;    /* tiles & controls */
      --text:#e8ecf1;    /* primary text */
      --muted:#9aa4b2;   /* secondary text */
      --accent:#6ea8fe;  /* buttons & focus */
      --ring: 0 0 0 2px var(--accent);
      --radius:16px;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
      --speed: 220ms;
    }

    /* Reset & base */
    *,*::before,*::after{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -10%, #1b2030 0%, transparent 50%),
                  radial-gradient(900px 500px at 120% 10%, #141827 0%, transparent 50%),
                  var(--bg);
      color:var(--text);
      line-height:1.5;
    }
    a { color: inherit; text-decoration: none; }

    .container{
      max-width:1200px; margin-inline:auto; padding:24px; width:100%;
    }

    header{
      display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap;
      margin: 20px 0 10px;
    }
    .title{
      font-size: clamp(1.25rem, 2.8vw, 2rem);
      font-weight: 700;
      letter-spacing:.3px;
    }
    .subtitle{ color:var(--muted); font-size: .95rem; }

    /* Filter controls */
    .filters{
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .btn{
      border:1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.06));
      color:var(--text);
      padding:10px 14px; border-radius:999px; cursor:pointer; user-select:none;
      transition: transform var(--speed) ease, background var(--speed) ease, border-color var(--speed) ease;
      display:inline-flex; align-items:center; gap:8px; font-weight:600; font-size:.95rem;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(0); }
    .btn[aria-pressed="true"], .btn.active{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.08));
      border-color: rgba(110,168,254,.7);
    }
    .btn:focus-visible{ outline:none; box-shadow: var(--ring); }

    /* Gallery grid */
    .gallery{
      --min: 240px; /* minimum column width */
      display:grid; gap:16px;
      grid-template-columns: repeat(auto-fill, minmax(var(--min), 1fr));
      margin-top: 16px;
    }

    .card{
      position:relative; overflow:hidden; border-radius: var(--radius);
      background: var(--card);
      box-shadow: var(--shadow);
      isolation:isolate;
    }
    .card img{
      display:block; width:100%; height: 260px; object-fit: cover; object-position: center;
      transition: transform 320ms ease, filter 320ms ease;
      will-change: transform;
    }
    .card .overlay{
      position:absolute; inset:0; display:flex; align-items:flex-end; padding:14px;
      background: linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,.0) 55%);
      color:#fff; opacity:0; transition: opacity var(--speed) ease;
    }
    .card:hover img{ transform: scale(1.05); }
    .card:hover .overlay{ opacity:1; }

    .caption{ font-weight:600; font-size: .95rem; }
    .tag{ font-size:.8rem; opacity:.9; margin-left:8px; color:#d7e3ff; background: rgba(110,168,254,.18); padding:.2rem .5rem; border-radius:999px; }

    /* Lightbox */
    .lightbox{ position: fixed; inset:0; display:none; place-items:center; background: rgba(0, 0, 0, .7); z-index: 50; }
    .lightbox[open]{ display:grid; animation: fadeIn var(--speed) ease; }
    @keyframes fadeIn { from { opacity:0 } to { opacity:1 } }

    .lightbox-content{
      position:relative; width:min(95vw, 1100px); border-radius: 18px; overflow:hidden; background:#0b0e14;
      box-shadow: 0 20px 50px rgba(0,0,0,.55);
    }
    .lightbox-figure{ margin:0; position:relative; }
    .lightbox-img{ width:100%; height:min(76vh, 820px); object-fit:contain; background:#0b0e14; display:block; }
    .lightbox-caption{ position:absolute; left:0; right:0; bottom:0; padding:14px 18px; color:#dfe7f3; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.65) 100%); font-size: .95rem; }

    .nav{ position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between; pointer-events:none; }
    .nav button{
      pointer-events:auto; border:none; background: rgba(255,255,255,.08); color:var(--text);
      width:46px; height:46px; border-radius:50%; margin: 10px; cursor:pointer; display:grid; place-items:center;
      transition: transform var(--speed) ease, background var(--speed) ease; backdrop-filter: blur(4px);
    }
    .nav button:hover{ transform: scale(1.06); background: rgba(110,168,254,.22); }
    .nav .close{ position:absolute; top:10px; right:10px; }

    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    /* Responsive tweaks */
    @media (max-width: 640px) {
      .card img{ height: 200px; }
      .filters{ width:100%; }
    }

    /* Hide items when filtering */
    .card[hidden]{ display:none !important; }

  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <div class="title">Image Gallery</div>
        <div class="subtitle">Responsive grid • Lightbox view • Keyboard & button navigation • Filters</div>
      </div>
      <nav class="filters" aria-label="Image categories">
        <button class="btn active" data-filter="all" aria-pressed="true">All</button>
        <button class="btn" data-filter="nature">Nature</button>
        <button class="btn" data-filter="city">City</button>
        <button class="btn" data-filter="animals">Animals</button>
      </nav>
    </header>

    <main class="gallery" id="gallery" aria-live="polite">
      <!-- Each .card carries a data-category to support filtering -->
      <!-- Replace src/hq srcset with your own images; these are placeholders from picsum.photos -->
      
      <!-- NATURE -->
      <figure class="card" data-category="nature" data-index="0">
        <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop" alt="Misty forest in the morning" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Misty Forest</span><span class="tag">Nature</span></figcaption>
      </figure>
      <figure class="card" data-category="nature" data-index="1">
        <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1200&auto=format&fit=crop" alt="Mountain lake under vibrant sky" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Mountain Lake</span><span class="tag">Nature</span></figcaption>
      </figure>

      <!-- CITY -->
      <figure class="card" data-category="city" data-index="2">
        <img src="https://images.unsplash.com/photo-1467269204594-9661b134dd2b?q=80&w=1200&auto=format&fit=crop" alt="City skyline at dusk" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Skyline</span><span class="tag">City</span></figcaption>
      </figure>
      <figure class="card" data-category="city" data-index="3">
        <img src="hiep-duong-uDvcxeACIV0-unsplash.jpg" alt="Neon street at night" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Neon Street</span><span class="tag">City</span></figcaption>
      </figure>

      <!-- ANIMALS -->
      <figure class="card" data-category="animals" data-index="6">
        <img src="https://images.unsplash.com/photo-1518791841217-8f162f1e1131?q=80&w=1200&auto=format&fit=crop" alt="Curious cat looking up" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Cats</span><span class="tag">Animals</span></figcaption>
      </figure>
      <figure class="card" data-category="animals" data-index="7">
        <img src="mathew-schwartz-NEvS5lHyrlk-unsplash.jpg" alt="Eagle in flight" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Eagle Flight</span><span class="tag">Animals</span></figcaption>
      </figure>

      <!-- MIX -->
      <figure class="card" data-category="nature" data-index="8">
        <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?q=80&w=1200&auto=format&fit=crop" alt="Desert dunes" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Desert Dunes</span><span class="tag">Nature</span></figcaption>
      </figure>
      <figure class="card" data-category="city" data-index="9">
        <img src="robert-tudor--8x6Ffud7Bk-unsplash.jpg" alt="Subway station" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Subway</span><span class="tag">City</span></figcaption>
      </figure>
      </figure>
      <figure class="card" data-category="animals" data-index="11">
        <img src="anne-nygard-hSzgy-qE578-unsplash.jpg" alt="Running horse" loading="lazy" />
        <figcaption class="overlay"><span class="caption">Wild Run</span><span class="tag">Animals</span></figcaption>
      </figure>
    </main>

    <dialog class="lightbox" id="lightbox" aria-labelledby="lightbox-title">
      <div class="lightbox-content">
        <figure class="lightbox-figure">
          <img id="lightboxImage" class="lightbox-img" alt="" />
          <figcaption id="lightboxCaption" class="lightbox-caption"></figcaption>
        </figure>
        <div class="nav" aria-label="Image navigation">
          <button class="prev" id="prevBtn" aria-label="Previous image">&#10094;<span class="sr-only">Previous</span></button>
          <button class="next" id="nextBtn" aria-label="Next image">&#10095;<span class="sr-only">Next</span></button>
          <button class="close" id="closeBtn" aria-label="Close lightbox">&#10005;<span class="sr-only">Close</span></button>
        </div>
      </div>
    </dialog>
  </div>

  <script>
    const gallery = document.getElementById('gallery');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImage');
    const lightboxCaption = document.getElementById('lightboxCaption');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const closeBtn = document.getElementById('closeBtn');

  
    let items = Array.from(document.querySelectorAll('.card'));
    let currentIndex = 0;

    
    function openLightbox(index){
      currentIndex = index;
      const fig = items[currentIndex];
      const img = fig.querySelector('img');
      lightboxImg.src = img.src;
      lightboxImg.alt = img.alt;
      const cap = fig.querySelector('.caption')?.textContent || '';
      const tag = fig.querySelector('.tag')?.textContent || '';
      lightboxCaption.textContent = cap + (tag ? ` • ${tag}` : '');
      lightbox.showModal();
    
      document.documentElement.style.overflow = 'hidden';
    }

  
    function closeLightbox(){
      lightbox.close();
      document.documentElement.style.overflow = '';
    }


    function showNext(){
      if(items.length === 0) return;
      currentIndex = (currentIndex + 1) % items.length;
      openLightbox(currentIndex);
    }
    function showPrev(){
      if(items.length === 0) return;
      currentIndex = (currentIndex - 1 + items.length) % items.length;
      openLightbox(currentIndex);
    }

    
    gallery.addEventListener('click', (e)=>{
      const card = e.target.closest('.card');
      if(!card) return;
      const index = items.indexOf(card);
      if(index > -1) openLightbox(index);
    });

    
    nextBtn.addEventListener('click', (e)=>{ e.stopPropagation(); showNext(); });
    prevBtn.addEventListener('click', (e)=>{ e.stopPropagation(); showPrev(); });
    closeBtn.addEventListener('click', ()=> closeLightbox());

    
    lightbox.addEventListener('click', (e)=>{
      const within = e.target.closest('.lightbox-content');
      if(!within) closeLightbox();
    });

    
    document.addEventListener('keydown', (e)=>{
      if(!lightbox.open) return;
      if(e.key === 'ArrowRight') showNext();
      else if(e.key === 'ArrowLeft') showPrev();
      else if(e.key === 'Escape') closeLightbox();
    });

    
    const filterBar = document.querySelector('.filters');
    filterBar.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-filter]');
      if(!btn) return;
      const filter = btn.getAttribute('data-filter');

      
      for(const b of filterBar.querySelectorAll('button')){
        b.classList.toggle('active', b === btn);
        b.setAttribute('aria-pressed', b === btn ? 'true' : 'false');
      }

      for(const card of document.querySelectorAll('.card')){
        if(filter === 'all' || card.dataset.category === filter){
          card.hidden = false;
        } else {
          card.hidden = true;
        }
      }

      
      items = Array.from(document.querySelectorAll('.card:not([hidden])'));
      
    });

    // Optional: intersection observer to add subtle reveal animation
    const io = new IntersectionObserver((entries)=>{
      entries.forEach((entry)=>{
        if(entry.isIntersecting){
          entry.target.animate([
            { opacity: 0, transform: 'translateY(8px)' },
            { opacity: 1, transform: 'translateY(0px)' }
          ], { duration: 300, easing: 'ease-out' });
          io.unobserve(entry.target);
        }
      });
    }, { threshold: .2 });
    document.querySelectorAll('.card').forEach(el=> io.observe(el));
  </script>
</body>
</html>
